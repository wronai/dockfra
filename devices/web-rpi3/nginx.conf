server {
    listen 80;
    server_name _;
    root /usr/share/nginx/html;
    index index.html;

    # Health endpoint — used by ssh-monitor to verify deployment
    location /health {
        default_type application/json;
        return 200 '{"status":"ok","device":"rpi3","service":"nginx","timestamp":"$time_iso8601"}';
    }

    # API stub — simulates a deployed app backend
    location /api/status {
        default_type application/json;
        return 200 '{"app":"deployed","version":"latest","device":"rpi3"}';
    }

    location / {
        try_files $uri $uri/ =404;
    }
}
