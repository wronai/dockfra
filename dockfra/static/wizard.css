*{box-sizing:border-box;margin:0;padding:0}
:root{
  --bg:#0f1117;--bg2:#1a1d27;--bg3:#232638;
  --text:#e8eaf6;--muted:#8892b0;--accent:#7c83f5;
  --green:#4ade80;--red:#f87171;--yellow:#fbbf24;
  --border:#2d3154;--radius:10px;
}
body{background:var(--bg);color:var(--text);font-family:'Segoe UI',system-ui,sans-serif;height:100vh;display:flex;flex-direction:column}
header{background:var(--bg2);border-bottom:1px solid var(--border);padding:12px 20px;display:flex;align-items:center;gap:12px}
header .logo{font-size:1.3rem;font-weight:700;color:var(--accent)}
header .sub{color:var(--muted);font-size:.85rem}
.status-bar{margin-left:auto;display:flex;gap:8px;align-items:center;font-size:.8rem;color:var(--muted)}
.dot{width:8px;height:8px;border-radius:50%;background:var(--green);animation:pulse 2s infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.4}}

.main{display:flex;flex:1;overflow:hidden;position:relative}
.chat-panel{width:25%;display:flex;flex-direction:column;min-width:200px;position:relative}
.processes-panel{width:20%;min-width:200px;background:var(--bg2);border-left:1px solid var(--border);display:flex;flex-direction:column;position:relative}
.log-panel{width:55%;min-width:200px;background:var(--bg2);border-left:1px solid var(--border);display:flex;flex-direction:column;position:relative}
.resize-handle{position:absolute;top:0;bottom:0;width:4px;background:transparent;cursor:col-resize;z-index:10}
.resize-handle:hover{background:var(--accent)}
.resize-handle.left{left:-2px}
.resize-handle.right{right:-2px}
.processes-panel h3{padding:10px 14px;font-size:.8rem;text-transform:uppercase;letter-spacing:.08em;color:var(--muted);border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between}
#processes-list{flex:1;overflow-y:auto;padding:10px 14px;font-family:'Cascadia Code','Fira Code',monospace;font-size:.75rem;line-height:1.6}
.process-item{display:flex;align-items:center;gap:8px;padding:4px 0;border-bottom:1px solid var(--border);position:relative}
.process-status{width:8px;height:8px;border-radius:50%;flex-shrink:0}
.process-status.running{background:var(--green)}
.process-status.stopped{background:var(--red)}
.process-status.unknown{background:var(--muted)}
.process-name{font-size:.7rem;color:var(--text);flex:1}
.process-details{font-size:.65rem;color:var(--muted);margin-left:auto;margin-right:8px}
.process-actions{position:relative;display:flex;gap:4px;align-items:center}
.process-actions select{background:var(--bg3);border:1px solid var(--border);color:var(--text);border-radius:4px;padding:2px 6px;font-size:.6rem;cursor:pointer}
.process-actions select:focus{outline:none;border-color:var(--accent)}
.process-icon-btn{background:transparent;border:none;color:var(--text);cursor:pointer;padding:2px;font-size:.8rem;border-radius:3px;transition:all .2s;position:relative}
.process-icon-btn:hover{background:var(--bg3);color:var(--accent)}
.process-icon-btn:active{transform:scale(0.9)}
.tooltip{position:absolute;bottom:100%;left:50%;transform:translateX(-50%);background:var(--bg2);border:1px solid var(--border);color:var(--text);padding:4px 8px;border-radius:4px;font-size:.6rem;white-space:nowrap;opacity:0;pointer-events:none;transition:opacity .2s;z-index:1000;margin-bottom:4px}
.tooltip::after{content:'';position:absolute;top:100%;left:50%;transform:translateX(-50%);border:4px solid transparent;border-top-color:var(--bg2)}
.process-icon-btn:hover .tooltip{opacity:1}
.chat-header{padding:10px 14px;font-size:.8rem;text-transform:uppercase;letter-spacing:.08em;color:var(--muted);border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;flex-shrink:0}
.copy-btn{font-size:0.7rem;padding:4px 8px;background:var(--bg3);border:1px solid var(--border);border-radius:4px;cursor:pointer;color:var(--text);transition:all .2s}
.copy-btn:hover{background:var(--accent);color:#fff;border-color:var(--accent)}
.msg{position:relative}
.msg-copy{position:absolute;top:5px;right:5px;width:20px;height:20px;background:var(--bg3);border:1px solid var(--border);border-radius:4px;display:none;align-items:center;justify-content:center;cursor:pointer;font-size:.7rem;opacity:0;transition:opacity .2s}
.msg:hover .msg-copy{display:flex;opacity:1}
.msg-copy:hover{background:var(--accent);color:#fff}
.log-panel h3{padding:10px 14px;font-size:.8rem;text-transform:uppercase;letter-spacing:.08em;color:var(--muted);border-bottom:1px solid var(--border)}
#log-output{flex:1;overflow-y:auto;padding:10px 14px;font-family:'Cascadia Code','Fira Code',monospace;font-size:.75rem;color:#6ee7b7;line-height:1.5}
.log-line{white-space:pre-wrap;word-break:break-all;padding:1px 0}
/* semantic log colors */
.log-line.log-err    {color:var(--red);font-weight:500}
.log-line.log-warn   {color:var(--yellow)}
.log-line.log-ok     {color:var(--green)}
.log-line.log-build  {color:#7dd3fc}  /* Docker step #N */
.log-line.log-done   {color:#a3e635}  /* DONE Xs */
.log-line.log-pull   {color:#c4b5fd}  /* Downloading/Pulling */
.log-line.log-dim    {color:#4b5563;font-size:.7rem}  /* pip metadata noise */
.log-line.log-restart{color:#fb923c;font-weight:600;background:rgba(251,146,60,.07);border-left:3px solid #fb923c;padding-left:6px}
/* highlight spans inside log lines */
.log-line .lh-ip    {color:#38bdf8;font-weight:600}
.log-line .lh-port  {color:#fbbf24}
.log-line .lh-svc   {color:#a78bfa}
.log-line .lh-path  {color:#6ee7b7;opacity:.9}

#chat{flex:1;overflow-y:auto;padding:20px;display:flex;flex-direction:column;gap:12px;scroll-behavior:smooth}
#widgets{padding:0 20px 16px;display:flex;flex-direction:column;gap:10px}
.chat-input-bar{display:flex;gap:6px;padding:10px 14px;border-top:1px solid var(--border);flex-shrink:0;background:var(--bg2)}
.chat-input-bar input{flex:1;background:var(--bg3);border:1px solid var(--border);color:var(--text);border-radius:8px;padding:8px 12px;font-size:.88rem;outline:none;transition:border .15s}
.chat-input-bar input:focus{border-color:var(--accent)}
.chat-input-bar button{background:var(--accent);border:none;color:#fff;border-radius:8px;padding:8px 14px;cursor:pointer;font-size:1rem;transition:opacity .15s}
.chat-input-bar button:hover{opacity:.85}
.chat-panel{width:25%;display:flex;flex-direction:column;min-width:200px;position:relative}

/* messages */
.msg{display:flex;gap:10px;max-width:85%;animation:fadein .2s ease}
@keyframes fadein{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}
.msg.bot{align-self:flex-start}
.msg.user{align-self:flex-end;flex-direction:row-reverse}
.avatar{width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1rem;flex-shrink:0}
.msg.bot .avatar{background:var(--bg3);border:1px solid var(--border)}
.msg.user .avatar{background:var(--accent)}
.bubble{background:var(--bg2);border:1px solid var(--border);border-radius:var(--radius);padding:10px 14px;font-size:.9rem;line-height:1.6}
.msg.user .bubble{background:var(--accent);border-color:transparent;color:#fff}
.bubble h1{font-size:1.2rem;margin-bottom:4px;color:var(--accent)}
.bubble h2{font-size:1rem;margin-bottom:4px;color:var(--accent)}
.bubble h3{font-size:.9rem;margin-bottom:2px}
.bubble strong{color:var(--accent)}
.bubble code{background:var(--bg3);border-radius:4px;padding:1px 5px;font-family:monospace;font-size:.85em}
.bubble pre{background:var(--bg3);border-radius:6px;padding:10px;overflow-x:auto;font-size:.8em;margin-top:6px}

/* widgets */
.w-buttons{display:flex;flex-wrap:wrap;gap:8px}
.btn{padding:8px 16px;border-radius:8px;border:1px solid var(--border);background:var(--bg3);color:var(--text);cursor:pointer;font-size:.88rem;transition:all .15s}
.btn:hover{background:var(--accent);border-color:var(--accent);color:#fff;transform:translateY(-1px)}
.btn.primary{background:var(--accent);border-color:var(--accent);color:#fff}

.w-form{background:var(--bg2);border:1px solid var(--border);border-radius:var(--radius);padding:16px;display:flex;flex-direction:column;gap:12px}
.field{display:flex;flex-direction:column;gap:4px}
.field label{font-size:.8rem;color:var(--muted);text-transform:uppercase;letter-spacing:.05em}
.field input,.field select{background:var(--bg3);border:1px solid var(--border);color:var(--text);border-radius:6px;padding:8px 12px;font-size:.9rem;width:100%}
.field input:focus,.field select:focus{outline:none;border-color:var(--accent)}
.field-input-wrap{position:relative;display:flex;align-items:center}
.field-input-wrap input{flex:1;padding-right:36px}
.eye-btn{position:absolute;right:6px;background:transparent;border:none;color:var(--muted);cursor:pointer;font-size:.95rem;padding:4px;border-radius:4px;transition:color .15s,opacity .15s;opacity:.55;line-height:1}
.eye-btn:hover{color:var(--accent);opacity:1}
.eye-btn.active{color:var(--accent);opacity:1}
.field select option{background:var(--bg3)}
.field-hint{font-size:.72rem;color:var(--muted);margin-top:3px;padding-left:2px;font-style:italic}

/* clickable suggestion chips */
.field-chips{display:flex;flex-wrap:wrap;gap:5px;margin-top:6px}
.chip{padding:3px 10px;border-radius:20px;border:1px solid var(--border);background:var(--bg3);
      color:var(--muted);font-size:.72rem;cursor:pointer;transition:all .15s;white-space:nowrap;
      max-width:200px;overflow:hidden;text-overflow:ellipsis}
.chip:hover{border-color:var(--accent);color:var(--accent);background:var(--bg2)}
.chip.active{border-color:var(--accent);background:var(--accent);color:#fff}

.w-code{background:var(--bg3);border:1px solid var(--border);border-radius:var(--radius);padding:12px 16px;font-family:'Cascadia Code','Fira Code',monospace;font-size:.8rem;color:#6ee7b7;white-space:pre-wrap;word-break:break-all;max-height:300px;overflow-y:auto}

.w-status{display:flex;flex-direction:column;gap:6px}
.status-item{display:flex;align-items:center;gap:10px;background:var(--bg2);border:1px solid var(--border);border-radius:8px;padding:8px 12px;font-size:.85rem}
.status-dot{width:10px;height:10px;border-radius:50%;flex-shrink:0}
.status-dot.ok{background:var(--green)}
.status-dot.err{background:var(--red)}
.status-name{font-weight:600;flex:1}
.status-detail{color:var(--muted);font-size:.78rem}

.w-progress{display:flex;align-items:center;gap:10px;padding:6px 2px;font-size:.85rem;color:var(--muted)}
.spin{width:16px;height:16px;border:2px solid var(--border);border-top-color:var(--accent);border-radius:50%;animation:spin .7s linear infinite;flex-shrink:0}
@keyframes spin{to{transform:rotate(360deg)}}
.w-progress.done{color:var(--green)}
.w-progress.done .spin{border-color:var(--green);border-top-color:var(--green);animation:none}
.w-progress.err{color:var(--red)}

/* scrollbars */
::-webkit-scrollbar{width:6px;height:6px}
::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:var(--border);border-radius:3px}

/* ── IP Picker Modal ──────────────────────────────────────────────────────── */
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.6);backdrop-filter:blur(3px);
  display:flex;align-items:center;justify-content:center;z-index:1000;animation:fadein .15s ease}
.modal{background:var(--bg2);border:1px solid var(--border);border-radius:12px;
  width:min(600px,92vw);max-height:80vh;display:flex;flex-direction:column;
  box-shadow:0 20px 60px rgba(0,0,0,.5);overflow:hidden}
.modal-header{display:flex;align-items:center;justify-content:space-between;
  padding:14px 18px;border-bottom:1px solid var(--border);font-weight:600;font-size:.95rem}
.modal-close-btn,.modal-refresh-btn,.modal-scan-btn{background:transparent;border:1px solid var(--border);
  color:var(--muted);border-radius:6px;padding:4px 9px;cursor:pointer;font-size:.85rem;transition:all .15s}
.modal-close-btn:hover{background:var(--red);border-color:var(--red);color:#fff}
.modal-refresh-btn:hover{background:var(--accent);border-color:var(--accent);color:#fff}
.modal-scan-btn:hover{background:var(--green);border-color:var(--green);color:#000}
.modal-body{flex:1;overflow-y:auto;padding:12px 0}
.modal-loading{padding:24px;text-align:center;color:var(--muted);font-size:.88rem}
.modal-section{margin-bottom:4px}
.modal-section-title{padding:7px 18px;font-size:.72rem;text-transform:uppercase;
  letter-spacing:.08em;color:var(--muted);background:var(--bg);border-bottom:1px solid var(--border);
  display:flex;align-items:center;justify-content:space-between}
.modal-section-title.collapsible{cursor:pointer;user-select:none}
.modal-section-title.collapsible:hover{color:var(--accent)}
.modal-chevron{font-size:.7rem;transition:transform .2s}
.modal-ip-row{display:flex;align-items:center;justify-content:space-between;
  padding:7px 18px;cursor:pointer;transition:background .12s;gap:8px;border-bottom:1px solid rgba(255,255,255,.03)}
.modal-ip-row:hover{background:var(--bg3)}
.modal-ip-row.selected{background:rgba(124,131,245,.15);border-left:3px solid var(--accent)}
.modal-ip-col{display:flex;flex-direction:column;gap:3px;flex:1;min-width:0}
.modal-ip-main{display:flex;align-items:center;gap:7px;font-size:.85rem;flex-wrap:wrap}
.modal-ip-main strong{font-family:'Cascadia Code','Fira Code',monospace;color:var(--text);letter-spacing:.03em}
.modal-ip-sub{display:flex;align-items:center;gap:5px;flex-wrap:wrap;min-height:14px}
.modal-hostname{font-size:.72rem;color:var(--accent);font-style:italic;background:rgba(124,131,245,.08);
  border:1px solid rgba(124,131,245,.2);border-radius:4px;padding:1px 6px}
.modal-ip-meta{display:flex;align-items:center;gap:6px;flex-shrink:0}
.modal-name{color:var(--muted);font-size:.78rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:160px}
.modal-net{background:var(--bg3);border:1px solid var(--border);border-radius:4px;
  padding:1px 6px;font-size:.68rem;color:var(--muted);white-space:nowrap}
.modal-ports{background:rgba(74,222,128,.08);border:1px solid rgba(74,222,128,.25);border-radius:4px;
  padding:1px 6px;font-size:.68rem;color:var(--green);white-space:nowrap}
.modal-mac{font-family:monospace;font-size:.68rem;color:var(--muted)}
.modal-state{font-size:.68rem;border-radius:4px;padding:1px 6px;font-weight:600;text-transform:uppercase}
.modal-state.reachable{background:rgba(74,222,128,.12);color:var(--green)}
.modal-state.stale{background:rgba(251,191,36,.1);color:var(--yellow)}
.modal-state.delay,.modal-state.probe{background:rgba(251,191,36,.1);color:var(--yellow)}
.modal-state.failed{background:rgba(248,113,113,.1);color:var(--red)}
.modal-state.unknown{background:var(--bg3);color:var(--muted)}
.modal-badge{font-size:.68rem;border-radius:4px;padding:2px 7px;white-space:nowrap}
.modal-badge.used{background:rgba(124,131,245,.15);color:var(--accent);border:1px solid rgba(124,131,245,.3)}
